/*! For license information please see main.812c3c9dd21da57df849.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdatefloema("main",{"./app/components/Canvas/Collections/index.js":(t,s,e)=>{e.r(s),e.d(s,{default:()=>h});var i=e("./node_modules/ogl/src/core/Transform.js"),l=e("./node_modules/ogl/src/extras/Plane.js"),o=e("./node_modules/gsap/index.js"),r=e("./node_modules/prefix/index.js"),n=e("./node_modules/lodash/map.js"),a=e("./app/components/Canvas/Collections/Media.js");const h=class{constructor({gl:t,scene:s,sizes:e,transition:l}){this.gl=t,this.sizes=e,this.scene=s,this.transition=l,this.transfromPrefix=r("transform"),this.group=new i.Transform,this.galleryElement=document.querySelector(".collections__gallery"),this.galleryWrapperElement=document.querySelector(".collections__gallery__wrapper"),this.titlesElement=document.querySelector(".collections__titles"),this.collectionsElements=document.querySelectorAll(".collections__article"),this.collectionsElementsActive="collections__article--active",this.mediasElements=document.querySelectorAll(".collections__gallery__media"),this.scroll={current:0,start:0,target:0,lerp:.1,velocity:1},this.createGeometry(),this.createGallery(),this.onResize({sizes:this.sizes}),this.group.setParent(this.scene),this.show()}createGeometry(){this.geometry=new l.Plane(this.gl)}createGallery(){this.medias=n(this.mediasElements,((t,s)=>new a.default({element:t,geometry:this.geometry,index:s,gl:this.gl,scene:this.group,sizes:this.sizes})))}async show(){if(this.transition){const{src:t}=this.transition.mesh.program.uniforms.tMap.value.image,s=window.TEXTURES[t],e=this.medias.find((t=>t.texture===s)),i=-e.bounds.left-e.bounds.width/2+window.innerWidth/2;this.update(),this.transition.animate({position:{x:0,y:e.mesh.position.y,z:0},rotation:e.mesh.rotation,scale:e.mesh.scale},(t=>{e.opacity.multiplier=1,n(this.medias,(t=>{e!==t&&t.show()})),this.scroll.current=this.scroll.target=this.scroll.start=this.scroll.last=i}))}else n(this.medias,(t=>t.show()))}hide(){n(this.medias,(t=>t.hide()))}onResize(t){this.sizes=t.sizes,this.bounds=this.galleryWrapperElement.getBoundingClientRect(),this.scroll.last=this.scroll.target=0,n(this.medias,(s=>s.onResize(t,this.scroll))),this.scroll.limit=this.bounds.width-this.medias[0].element.clientWidth}onTouchDown({x:t,y:s}){this.scroll.last=this.scroll.current}onTouchMove({x:t,y:s}){const e=t.start-t.end;this.scroll.target=this.scroll.last-e}onTouchUp({x:t,y:s}){}onWheel({pixelY:t}){this.scroll.target+=t}onChange(t){this.index=t;const s=parseInt(this.mediasElements[this.index].getAttribute("data-index"));n(this.collectionsElements,((t,e)=>{e===s?t.classList.add(this.collectionsElementsActive):t.classList.remove(this.collectionsElementsActive)})),this.titlesElement.style[this.transfromPrefix]=`\n      translateY(-${25*s}%)\n      translate(-50%, -50%)\n      rotate(-90deg)\n    `}update(){if(!this.bounds)return;this.scroll.target=o.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=o.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.lerp),this.galleryElement.style[this.transfromPrefix]=`translateX(${this.scroll.current}px)`,this.scroll.last<this.scroll.current?this.scroll.direction="right":this.scroll.last>this.scroll.current&&(this.scroll.direction="left"),this.scroll.last=this.scroll.current,n(this.medias,((t,s)=>{t.update(this.scroll.current)}));const t=Math.floor(Math.abs(this.scroll.current/this.scroll.limit)*this.medias.length);this.index!==t&&this.onChange(t),n(this.medias,((t,s)=>{t.update(this.scroll.current,this.index),t.mesh.rotation.z=Math.abs(o.default.utils.mapRange(0,1,-.2,.2,s/(this.medias.length-1))-.1),t.mesh.position.y+=40*Math.cos(t.mesh.position.x/this.sizes.width*Math.PI*.1)-40}))}destroy(){this.scene.removeChild(this.group)}}}},(function(t){t.h=()=>"1785ebcb9f052263e90e"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q2xDZixLQUFLYyxPQUFPcUUsVUFBWSxRQUNkbkYsS0FBS2MsT0FBTzhDLEtBQU81RCxLQUFLYyxPQUFPQyxVQUN6Q2YsS0FBS2MsT0FBT3FFLFVBQVksUUFHekJuRixLQUFLYyxPQUFPOEMsS0FBTzVELEtBQUtjLE9BQU9DLFFBRS9CYSxFQUFJNUIsS0FBSzJCLFFBQVEsQ0FBQ2UsRUFBT1osS0FDeEJZLEVBQU1NLE9BQU9oRCxLQUFLYyxPQUFPQyxRQUF6QixJQUdELE1BQU1lLEVBQVFzRCxLQUFLQyxNQUFNRCxLQUFLRSxJQUFJdEYsS0FBS2MsT0FBT0MsUUFBVWYsS0FBS2MsT0FBT2tELE9BQVNoRSxLQUFLMkIsT0FBTzRELFFBRXJGdkYsS0FBSzhCLFFBQVVBLEdBQ2xCOUIsS0FBS3lFLFNBQVMzQyxHQUdmRixFQUFJNUIsS0FBSzJCLFFBQVEsQ0FBQ2UsRUFBT1osS0FDeEJZLEVBQU1NLE9BQU9oRCxLQUFLYyxPQUFPQyxRQUFTZixLQUFLOEIsT0FDdkNZLEVBQU1ULEtBQUtxQixTQUFTRCxFQUFJK0IsS0FBS0UsSUFDNUJKLEVBQUFBLFFBQUFBLE1BQUFBLFNBQW9CLEVBQUcsR0FBSSxHQUFLLEdBQUtwRCxHQUFTOUIsS0FBSzJCLE9BQU80RCxPQUFTLElBQU0sSUFFMUU3QyxFQUFNVCxLQUFLaUIsU0FBU0UsR0FDb0QsR0FBdkVnQyxLQUFLSSxJQUFLOUMsRUFBTVQsS0FBS2lCLFNBQVNDLEVBQUluRCxLQUFLRixNQUFNZ0QsTUFBU3NDLEtBQUtLLEdBQUssSUFBWSxFQUQ3RSxHQUdELENBR0RDLFVBQ0MxRixLQUFLSCxNQUFNOEYsWUFBWTNGLEtBQUtHLE1BQzVCLGtCQ2pNRnlGLEVBQW9CQyxFQUFJLElBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mbG9lbWEvLi9hcHAvY29tcG9uZW50cy9DYW52YXMvQ29sbGVjdGlvbnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZmxvZW1hL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQbGFuZSwgVHJhbnNmb3JtIH0gZnJvbSAnb2dsJ1xuaW1wb3J0IEdTQVAgZnJvbSAnZ3NhcCdcbmltcG9ydCBQcmVmaXggZnJvbSAncHJlZml4J1xuXG5pbXBvcnQgbWFwIGZyb20gJ2xvZGFzaC9tYXAnXG5pbXBvcnQgTWVkaWEgZnJvbSAnLi9NZWRpYSdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xuXHRjb25zdHJ1Y3Rvcih7IGdsLCBzY2VuZSwgc2l6ZXMsIHRyYW5zaXRpb24gfSkge1xuXHRcdHRoaXMuZ2wgPSBnbFxuXHRcdHRoaXMuc2l6ZXMgPSBzaXplc1xuXHRcdHRoaXMuc2NlbmUgPSBzY2VuZVxuXHRcdHRoaXMudHJhbnNpdGlvbiA9IHRyYW5zaXRpb25cblxuXHRcdHRoaXMudHJhbnNmcm9tUHJlZml4ID0gUHJlZml4KCd0cmFuc2Zvcm0nKVxuXG5cdFx0dGhpcy5ncm91cCA9IG5ldyBUcmFuc2Zvcm0oKVxuXG5cdFx0dGhpcy5nYWxsZXJ5RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xsZWN0aW9uc19fZ2FsbGVyeScpXG5cdFx0dGhpcy5nYWxsZXJ5V3JhcHBlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29sbGVjdGlvbnNfX2dhbGxlcnlfX3dyYXBwZXInKVxuXG5cdFx0dGhpcy50aXRsZXNFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbGxlY3Rpb25zX190aXRsZXMnKVxuXG5cdFx0dGhpcy5jb2xsZWN0aW9uc0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbGxlY3Rpb25zX19hcnRpY2xlJylcblx0XHR0aGlzLmNvbGxlY3Rpb25zRWxlbWVudHNBY3RpdmUgPSAnY29sbGVjdGlvbnNfX2FydGljbGUtLWFjdGl2ZSdcblxuXHRcdHRoaXMubWVkaWFzRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29sbGVjdGlvbnNfX2dhbGxlcnlfX21lZGlhJylcblxuXHRcdHRoaXMuc2Nyb2xsID0ge1xuXHRcdFx0Y3VycmVudDogMCxcblx0XHRcdHN0YXJ0OiAwLFxuXHRcdFx0dGFyZ2V0OiAwLFxuXHRcdFx0bGVycDogMC4xLFxuXHRcdFx0dmVsb2NpdHk6IDEsXG5cdFx0fVxuXG5cdFx0dGhpcy5jcmVhdGVHZW9tZXRyeSgpXG5cdFx0dGhpcy5jcmVhdGVHYWxsZXJ5KClcblxuXHRcdHRoaXMub25SZXNpemUoeyBzaXplczogdGhpcy5zaXplcyB9KVxuXG5cdFx0dGhpcy5ncm91cC5zZXRQYXJlbnQodGhpcy5zY2VuZSlcblxuXHRcdHRoaXMuc2hvdygpXG5cdH1cblxuXHRjcmVhdGVHZW9tZXRyeSgpIHtcblx0XHR0aGlzLmdlb21ldHJ5ID0gbmV3IFBsYW5lKHRoaXMuZ2wpXG5cdH1cblxuXHRjcmVhdGVHYWxsZXJ5KCkge1xuXHRcdHRoaXMubWVkaWFzID0gbWFwKHRoaXMubWVkaWFzRWxlbWVudHMsIChlbGVtZW50LCBpbmRleCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBNZWRpYSh7XG5cdFx0XHRcdGVsZW1lbnQsXG5cdFx0XHRcdGdlb21ldHJ5OiB0aGlzLmdlb21ldHJ5LFxuXHRcdFx0XHRpbmRleCxcblx0XHRcdFx0Z2w6IHRoaXMuZ2wsXG5cdFx0XHRcdHNjZW5lOiB0aGlzLmdyb3VwLFxuXHRcdFx0XHRzaXplczogdGhpcy5zaXplcyxcblx0XHRcdH0pXG5cdFx0fSlcblx0fVxuXG5cdC8qIEFuaW1hdGlvbnMgKi9cblx0YXN5bmMgc2hvdygpIHtcblx0XHRpZiAodGhpcy50cmFuc2l0aW9uKSB7XG5cdFx0XHRjb25zdCB7IHNyYyB9ID0gdGhpcy50cmFuc2l0aW9uLm1lc2gucHJvZ3JhbS51bmlmb3Jtcy50TWFwLnZhbHVlLmltYWdlXG5cdFx0XHRjb25zdCB0ZXh0dXJlID0gd2luZG93LlRFWFRVUkVTW3NyY11cblx0XHRcdGNvbnN0IG1lZGlhID0gdGhpcy5tZWRpYXMuZmluZChtZWRpYSA9PiBtZWRpYS50ZXh0dXJlID09PSB0ZXh0dXJlKVxuXHRcdFx0Y29uc3Qgc2Nyb2xsID0gLW1lZGlhLmJvdW5kcy5sZWZ0IC0gbWVkaWEuYm91bmRzLndpZHRoIC8gMiArIHdpbmRvdy5pbm5lcldpZHRoIC8gMlxuXG5cdFx0XHR0aGlzLnVwZGF0ZSgpXG5cblx0XHRcdHRoaXMudHJhbnNpdGlvbi5hbmltYXRlKFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0cG9zaXRpb246IHsgeDogMCwgeTogbWVkaWEubWVzaC5wb3NpdGlvbi55LCB6OiAwIH0sXG5cdFx0XHRcdFx0cm90YXRpb246IG1lZGlhLm1lc2gucm90YXRpb24sXG5cdFx0XHRcdFx0c2NhbGU6IG1lZGlhLm1lc2guc2NhbGUsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdF8gPT4ge1xuXHRcdFx0XHRcdG1lZGlhLm9wYWNpdHkubXVsdGlwbGllciA9IDFcblxuXHRcdFx0XHRcdG1hcCh0aGlzLm1lZGlhcywgaXRlbSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAobWVkaWEgIT09IGl0ZW0pIHtcblx0XHRcdFx0XHRcdFx0aXRlbS5zaG93KClcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSB0aGlzLnNjcm9sbC50YXJnZXQgPSB0aGlzLnNjcm9sbC5zdGFydCA9IHRoaXMuc2Nyb2xsLmxhc3QgPSBzY3JvbGxcblx0XHRcdFx0fVxuXHRcdFx0KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLnNob3coKSlcblx0XHR9XG5cdH1cblx0aGlkZSgpIHtcblx0XHRtYXAodGhpcy5tZWRpYXMsIG1lZGlhID0+IG1lZGlhLmhpZGUoKSlcblx0fVxuXG5cdC8qIEV2ZW50cyAqL1xuXHRvblJlc2l6ZShldmVudCkge1xuXHRcdHRoaXMuc2l6ZXMgPSBldmVudC5zaXplc1xuXG5cdFx0dGhpcy5ib3VuZHMgPSB0aGlzLmdhbGxlcnlXcmFwcGVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG5cdFx0dGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLnRhcmdldCA9IDBcblxuXHRcdG1hcCh0aGlzLm1lZGlhcywgbWVkaWEgPT4gbWVkaWEub25SZXNpemUoZXZlbnQsIHRoaXMuc2Nyb2xsKSlcblxuXHRcdHRoaXMuc2Nyb2xsLmxpbWl0ID0gdGhpcy5ib3VuZHMud2lkdGggLSB0aGlzLm1lZGlhc1swXS5lbGVtZW50LmNsaWVudFdpZHRoXG5cdH1cblxuXHRvblRvdWNoRG93bih7IHgsIHkgfSkge1xuXHRcdHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC5jdXJyZW50XG5cdH1cblxuXHRvblRvdWNoTW92ZSh7IHgsIHkgfSkge1xuXHRcdGNvbnN0IGRpc3RhbmNlID0geC5zdGFydCAtIHguZW5kXG5cblx0XHR0aGlzLnNjcm9sbC50YXJnZXQgPSB0aGlzLnNjcm9sbC5sYXN0IC0gZGlzdGFuY2Vcblx0fVxuXG5cdG9uVG91Y2hVcCh7IHgsIHkgfSkge31cblxuXHRvbldoZWVsKHsgcGl4ZWxZIH0pIHtcblx0XHR0aGlzLnNjcm9sbC50YXJnZXQgKz0gcGl4ZWxZXG5cdH1cblxuXHQvKiBDaGFuZ2VkICovXG5cdG9uQ2hhbmdlKGluZGV4KSB7XG5cdFx0dGhpcy5pbmRleCA9IGluZGV4XG5cblx0XHRjb25zdCBzZWxlY3RlZENvbGxlY3Rpb24gPSBwYXJzZUludCh0aGlzLm1lZGlhc0VsZW1lbnRzW3RoaXMuaW5kZXhdLmdldEF0dHJpYnV0ZSgnZGF0YS1pbmRleCcpKVxuXG5cdFx0bWFwKHRoaXMuY29sbGVjdGlvbnNFbGVtZW50cywgKGVsZW1lbnQsIGVsZW1lbnRJbmRleCkgPT4ge1xuXHRcdFx0aWYgKGVsZW1lbnRJbmRleCA9PT0gc2VsZWN0ZWRDb2xsZWN0aW9uKSB7XG5cdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLmNvbGxlY3Rpb25zRWxlbWVudHNBY3RpdmUpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5jb2xsZWN0aW9uc0VsZW1lbnRzQWN0aXZlKVxuXHRcdFx0fVxuXHRcdH0pXG5cblx0XHR0aGlzLnRpdGxlc0VsZW1lbnQuc3R5bGVbdGhpcy50cmFuc2Zyb21QcmVmaXhdID0gYFxuICAgICAgdHJhbnNsYXRlWSgtJHsyNSAqIHNlbGVjdGVkQ29sbGVjdGlvbn0lKVxuICAgICAgdHJhbnNsYXRlKC01MCUsIC01MCUpXG4gICAgICByb3RhdGUoLTkwZGVnKVxuICAgIGBcblx0fVxuXG5cdC8qIFVwZGF0ZSAqL1xuXHR1cGRhdGUoKSB7XG5cdFx0aWYgKCF0aGlzLmJvdW5kcykgcmV0dXJuXG5cblx0XHR0aGlzLnNjcm9sbC50YXJnZXQgPSBHU0FQLnV0aWxzLmNsYW1wKC10aGlzLnNjcm9sbC5saW1pdCwgMCwgdGhpcy5zY3JvbGwudGFyZ2V0KVxuXG5cdFx0dGhpcy5zY3JvbGwuY3VycmVudCA9IEdTQVAudXRpbHMuaW50ZXJwb2xhdGUoXG5cdFx0XHR0aGlzLnNjcm9sbC5jdXJyZW50LFxuXHRcdFx0dGhpcy5zY3JvbGwudGFyZ2V0LFxuXHRcdFx0dGhpcy5zY3JvbGwubGVycFxuXHRcdClcblxuXHRcdHRoaXMuZ2FsbGVyeUVsZW1lbnQuc3R5bGVbdGhpcy50cmFuc2Zyb21QcmVmaXhdID0gYHRyYW5zbGF0ZVgoJHt0aGlzLnNjcm9sbC5jdXJyZW50fXB4KWBcblxuXHRcdGlmICh0aGlzLnNjcm9sbC5sYXN0IDwgdGhpcy5zY3JvbGwuY3VycmVudCkge1xuXHRcdFx0dGhpcy5zY3JvbGwuZGlyZWN0aW9uID0gJ3JpZ2h0J1xuXHRcdH0gZWxzZSBpZiAodGhpcy5zY3JvbGwubGFzdCA+IHRoaXMuc2Nyb2xsLmN1cnJlbnQpIHtcblx0XHRcdHRoaXMuc2Nyb2xsLmRpcmVjdGlvbiA9ICdsZWZ0J1xuXHRcdH1cblxuXHRcdHRoaXMuc2Nyb2xsLmxhc3QgPSB0aGlzLnNjcm9sbC5jdXJyZW50XG5cblx0XHRtYXAodGhpcy5tZWRpYXMsIChtZWRpYSwgaW5kZXgpID0+IHtcblx0XHRcdG1lZGlhLnVwZGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50KVxuXHRcdH0pXG5cblx0XHRjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5hYnModGhpcy5zY3JvbGwuY3VycmVudCAvIHRoaXMuc2Nyb2xsLmxpbWl0KSAqIHRoaXMubWVkaWFzLmxlbmd0aClcblxuXHRcdGlmICh0aGlzLmluZGV4ICE9PSBpbmRleCkge1xuXHRcdFx0dGhpcy5vbkNoYW5nZShpbmRleClcblx0XHR9XG5cblx0XHRtYXAodGhpcy5tZWRpYXMsIChtZWRpYSwgaW5kZXgpID0+IHtcblx0XHRcdG1lZGlhLnVwZGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50LCB0aGlzLmluZGV4KVxuXHRcdFx0bWVkaWEubWVzaC5yb3RhdGlvbi56ID0gTWF0aC5hYnMoXG5cdFx0XHRcdEdTQVAudXRpbHMubWFwUmFuZ2UoMCwgMSwgLTAuMiwgMC4yLCBpbmRleCAvICh0aGlzLm1lZGlhcy5sZW5ndGggLSAxKSkgLSAwLjFcblx0XHRcdClcblx0XHRcdG1lZGlhLm1lc2gucG9zaXRpb24ueSArPVxuXHRcdFx0XHRNYXRoLmNvcygobWVkaWEubWVzaC5wb3NpdGlvbi54IC8gdGhpcy5zaXplcy53aWR0aCkgKiBNYXRoLlBJICogMC4xKSAqIDQwIC0gNDBcblx0XHR9KVxuXHR9XG5cblx0LyogRGVzdHJveSAqL1xuXHRkZXN0cm95KCkge1xuXHRcdHRoaXMuc2NlbmUucmVtb3ZlQ2hpbGQodGhpcy5ncm91cClcblx0fVxufVxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiMTc4NWViY2I5ZjA1MjI2M2U5MGVcIikiXSwibmFtZXMiOlsiY29uc3RydWN0b3IiLCJnbCIsInNjZW5lIiwic2l6ZXMiLCJ0cmFuc2l0aW9uIiwidGhpcyIsInRyYW5zZnJvbVByZWZpeCIsIlByZWZpeCIsImdyb3VwIiwiVHJhbnNmb3JtIiwiZ2FsbGVyeUVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnYWxsZXJ5V3JhcHBlckVsZW1lbnQiLCJ0aXRsZXNFbGVtZW50IiwiY29sbGVjdGlvbnNFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb2xsZWN0aW9uc0VsZW1lbnRzQWN0aXZlIiwibWVkaWFzRWxlbWVudHMiLCJzY3JvbGwiLCJjdXJyZW50Iiwic3RhcnQiLCJ0YXJnZXQiLCJsZXJwIiwidmVsb2NpdHkiLCJjcmVhdGVHZW9tZXRyeSIsImNyZWF0ZUdhbGxlcnkiLCJvblJlc2l6ZSIsInNldFBhcmVudCIsInNob3ciLCJnZW9tZXRyeSIsIlBsYW5lIiwibWVkaWFzIiwibWFwIiwiZWxlbWVudCIsImluZGV4IiwiTWVkaWEiLCJzcmMiLCJtZXNoIiwicHJvZ3JhbSIsInVuaWZvcm1zIiwidE1hcCIsInZhbHVlIiwiaW1hZ2UiLCJ0ZXh0dXJlIiwid2luZG93IiwiVEVYVFVSRVMiLCJtZWRpYSIsImZpbmQiLCJib3VuZHMiLCJsZWZ0Iiwid2lkdGgiLCJpbm5lcldpZHRoIiwidXBkYXRlIiwiYW5pbWF0ZSIsInBvc2l0aW9uIiwieCIsInkiLCJ6Iiwicm90YXRpb24iLCJzY2FsZSIsIl8iLCJvcGFjaXR5IiwibXVsdGlwbGllciIsIml0ZW0iLCJsYXN0IiwiaGlkZSIsImV2ZW50IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibGltaXQiLCJjbGllbnRXaWR0aCIsIm9uVG91Y2hEb3duIiwib25Ub3VjaE1vdmUiLCJkaXN0YW5jZSIsImVuZCIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJwaXhlbFkiLCJvbkNoYW5nZSIsInNlbGVjdGVkQ29sbGVjdGlvbiIsInBhcnNlSW50IiwiZ2V0QXR0cmlidXRlIiwiZWxlbWVudEluZGV4IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic3R5bGUiLCJHU0FQIiwiZGlyZWN0aW9uIiwiTWF0aCIsImZsb29yIiwiYWJzIiwibGVuZ3RoIiwiY29zIiwiUEkiLCJkZXN0cm95IiwicmVtb3ZlQ2hpbGQiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiaCJdLCJzb3VyY2VSb290IjoiIn0=